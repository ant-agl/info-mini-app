System.register(["./index-legacy-iboyzMez.js","./App-legacy-DsSY3WDm.js","./Header-legacy-CklhL44W.js","./FormField-legacy-onzlH6pa.js","./PanelHeaderBack-legacy-DBl1NX2A.js","./Div-legacy-Dy3DujUf.js","./Title-legacy-QPBUXvj_.js"],(function(e,t){"use strict";var a,r,i,s,n,o,c,l,d,u,h,p,g,j,x,m,v,k,f,y,B,G,z,C,P,b,S;return{setters:[e=>{a=e._,r=e.j,i=e.R,s=e.a,n=e.c,o=e.Z,c=e.$,l=e.a0,d=e.a2,u=e.a3,h=e.a4,p=e.a5,g=e.r,j=e.a6,x=e.a7,m=e.a8,v=e.a9,k=e.aa},e=>{f=e.P,y=e.a,B=e.G,G=e.S},e=>{z=e.H},e=>{C=e.F},e=>{P=e.P,b=e.T},e=>{S=e.D},null],execute:function(){const W={vertical:"vkuiButtonGroup--mode-vertical",horizontal:"vkuiButtonGroup--mode-horizontal"},w={space:"vkuiButtonGroup--gap-space",s:"vkuiButtonGroup--gap-s",m:"vkuiButtonGroup--gap-m"},F={left:"vkuiButtonGroup--align-left",center:"vkuiButtonGroup--align-center",right:"vkuiButtonGroup--align-right"},H=e=>{var{mode:t="horizontal",gap:o="m",stretched:c=!1,align:l="left"}=e,d=a(e,["mode","gap","stretched","align"]);return r.jsx(i,s({baseClassName:n("vkuiButtonGroup",W[t],"none"!==o&&w[o],c&&"vkuiButtonGroup--stretched",F[l]),role:"group"},d))},T=o.lazy((()=>c((()=>t.import("./PreviewMessage-legacy-BRFLzWV_.js")),void 0,t.meta.url))),D=({id:e})=>{const t=l(),{openError:a}=d(),i=u(),s=h(),n=p((e=>e.tickets.tickets)),[o,c]=g.useState(),[W,w]=g.useState("");return g.useEffect((()=>{if(i&&i.id){const e=n.find((e=>e.id===i.id));e?c(e):j().then((e=>{s(x(e));const a=e.find((e=>e.id===i.id));a?c(a):t.push("/")})).catch((e=>{t.push("/"),a(e.response.data||"Возникла ошибка")}))}}),[]),r.jsxs(f,{id:e,children:[r.jsx(y,{before:r.jsx(P,{onClick:()=>t.back()}),children:o?.title}),o&&i&&r.jsxs(B,{children:[r.jsx(z,{children:"Предпросмотр тикета"}),o&&r.jsx(T,{ticket:o}),r.jsx(G,{size:32}),!o.offer&&r.jsxs("div",{children:[r.jsxs(B,{style:{maxWidth:450,margin:"0 auto"},children:[r.jsx(z,{children:"Список корректировок"}),r.jsx(S,{children:o.corrections.map(((e,t)=>r.jsxs("p",{children:[e.text," (",e.author,")"]},t)))})]}),r.jsx(C,{top:"Описание доработок",style:{maxWidth:450,margin:"0 auto"},children:r.jsx(b,{id:"reason",name:"reason",placeholder:"Введите описание доработок",value:W,required:!0,onChange:e=>w(e.currentTarget.value)})}),r.jsx(S,{children:r.jsxs(H,{mode:"horizontal",gap:"m",stretched:!0,style:{maxWidth:450,margin:"0 auto"},children:[r.jsx(m,{onClick:()=>{var e;e=i.id,v(e,W).then((()=>{t.push("/")})).catch((e=>{a(e.response.data||"Возникла ошибка")}))},size:"l",appearance:"negative",stretched:!0,children:"На доработку"}),r.jsx(m,{onClick:()=>{var e;e=i.id,k(e).then((()=>{t.push("/")})).catch((e=>{a(e.response.data||"Возникла ошибка")}))},size:"l",appearance:"positive",stretched:!0,children:"На публикацию"})]})})]}),r.jsx(H,{mode:"horizontal",gap:"m",stretched:!0,style:{maxWidth:450,margin:"0 auto 12px"},children:r.jsx(m,{onClick:()=>{t.push("/new/"+i.id)},size:"l",stretched:!0,children:"Изменить"})})]})]})};e({Preview:D,default:D})}}}));
